--- net/minecraft/world/level/chunk/storage/RegionFile.java
+++ net/minecraft/world/level/chunk/storage/RegionFile.java
@@ -25,11 +25,20 @@
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 
 public class RegionFile implements AutoCloseable {
    private static final Logger LOGGER = LogManager.getLogger();
+   private static final int SECTOR_BYTES = 4096;
+   @VisibleForTesting
+   protected static final int SECTOR_INTS = 1024;
+   private static final int CHUNK_HEADER_SIZE = 5;
+   private static final int HEADER_OFFSET = 0;
    private static final ByteBuffer PADDING_BUFFER = ByteBuffer.allocateDirect(1);
+   private static final String EXTERNAL_FILE_EXTENSION = ".mcc";
+   private static final int EXTERNAL_STREAM_FLAG = 128;
+   private static final int EXTERNAL_CHUNK_THRESHOLD = 256;
+   private static final int CHUNK_NOT_PRESENT = 0;
    private final FileChannel file;
    private final Path externalFileDir;
    private final RegionFileVersion version;
    private final ByteBuffer header;
    private final IntBuffer offsets;
@@ -139,10 +148,14 @@
             }
          }
       }
    }
 
+   private static int getTimestamp() {
+      return (int)(Util.getEpochMillis() / 1000L);
+   }
+
    private static boolean isExternalStreamChunk(byte var0) {
       return (var0 & 128) != 0;
    }
 
    private static byte getExternalChunkVersion(byte var0) {
@@ -245,10 +258,22 @@
 
    public void flush() throws IOException {
       this.file.force(true);
    }
 
+   public void clear(ChunkPos var1) throws IOException {
+      int var2 = getOffsetIndex(var1);
+      int var3 = this.offsets.get(var2);
+      if (var3 != 0) {
+         this.offsets.put(var2, 0);
+         this.timestamps.put(var2, getTimestamp());
+         this.writeHeader();
+         Files.deleteIfExists(this.getExternalChunkPath(var1));
+         this.usedSectors.free(getSectorNumber(var3), getNumSectors(var3));
+      }
+   }
+
    protected synchronized void write(ChunkPos var1, ByteBuffer var2) throws IOException {
       int var3 = getOffsetIndex(var1);
       int var4 = this.offsets.get(var3);
       int var5 = getSectorNumber(var4);
       int var6 = getNumSectors(var4);
@@ -270,13 +295,12 @@
             Files.deleteIfExists(this.getExternalChunkPath(var1));
          };
          this.file.write(var2, (long)(var9 * 4096));
       }
 
-      int var13 = (int)(Util.getEpochMillis() / 1000L);
       this.offsets.put(var3, this.packSectorOffset(var9, var8));
-      this.timestamps.put(var3, var13);
+      this.timestamps.put(var3, getTimestamp());
       this.writeHeader();
       var10.run();
       if (var5 != 0) {
          this.usedSectors.free(var5, var6);
       }
