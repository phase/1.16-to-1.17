--- net/minecraft/commands/arguments/selector/options/EntitySelectorOptions.java
+++ net/minecraft/commands/arguments/selector/options/EntitySelectorOptions.java
@@ -341,11 +341,11 @@
 
                ResourceLocation var3;
                if (var0.isTag()) {
                   var3 = ResourceLocation.read(var0.getReader());
                   var0.addPredicate((var2x) -> {
-                     return var2x.getServer().getTags().getEntityTypes().getTagOrEmpty(var3).contains(var2x.getType()) != var2;
+                     return var2x.getType().is(var2x.getServer().getTags().getEntityTypes().getTagOrEmpty(var3)) != var2;
                   });
                } else {
                   var3 = ResourceLocation.read(var0.getReader());
                   EntityType var4 = (EntityType)Registry.ENTITY_TYPE.getOptional(var3).orElseThrow(() -> {
                      var0.getReader().setCursor(var1);
@@ -384,11 +384,11 @@
             boolean var1 = var0.shouldInvertValue();
             CompoundTag var2 = (new TagParser(var0.getReader())).readStruct();
             var0.addPredicate((var2x) -> {
                CompoundTag var3 = var2x.saveWithoutId(new CompoundTag());
                if (var2x instanceof ServerPlayer) {
-                  ItemStack var4 = ((ServerPlayer)var2x).inventory.getSelected();
+                  ItemStack var4 = ((ServerPlayer)var2x).getInventory().getSelected();
                   if (!var4.isEmpty()) {
                      var3.put("SelectedItem", var4.save(new CompoundTag()));
                   }
                }
 
